var A=(a,e)=>(e=Symbol[a])?e:Symbol.for("Symbol."+a),G=a=>{throw TypeError(a)};var R=(a,e,n)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&G("Object expected");var i,d;n&&(i=e[A("asyncDispose")]),i===void 0&&(i=e[A("dispose")],n&&(d=i)),typeof i!="function"&&G("Object not disposable"),d&&(i=function(){try{d.call(this)}catch(h){return Promise.reject(h)}}),a.push([n,i,e])}else n&&a.push([n]);return e},y=(a,e,n)=>{var i=typeof SuppressedError=="function"?SuppressedError:function(o,p,c,g){return g=Error(c),g.name="SuppressedError",g.error=o,g.suppressed=p,g},d=o=>e=n?new i(o,e,"An error was suppressed during disposal"):(n=!0,o),h=o=>{for(;o=a.pop();)try{var p=o[1]&&o[1].call(o[2]);if(o[0])return Promise.resolve(p).then(h,c=>(d(c),h()))}catch(c){d(c)}if(n)throw e};return h()};import{compile as L,env as $,Features as C,Instrumentation as I,normalizePath as B}from"@tailwindcss/node";import{clearRequireCache as q}from"@tailwindcss/node/require-cache";import{Scanner as T}from"@tailwindcss/oxide";import{Features as P,transform as z}from"lightningcss";import N from"node:fs/promises";import S from"node:path";var v=$.DEBUG,J=/[?&](raw|url)\b/,K=/[?&]index\=\d+\.css$/,W=["tailwind-merge"];function O(){let a=[],e=null,n=!1,i=!1,d=new E(()=>new Set),h=new T({}),o=new E(t=>{let r=e.createResolver({...e.resolve,extensions:[".css"],mainFields:["style"],conditions:["style","development|production"],tryIndex:!1,preferRelative:!0});function l(m,f){return r(m,f,!0,n)}let u=e.createResolver(e.resolve);function s(m,f){return u(m,f,!0,n)}return new _(t,()=>d,e.base,l,s)});function p(t,r,l){for(let s of W)if(t.includes(`.vite/deps/${s}.js`)||t.includes(`/node_modules/${s}/`))return;let u=!1;for(let s of h.scanFiles([{content:r,extension:l}]))u=!0,d.get(t).add(s);u&&c()}function c(){for(let t of a){let r=[];for(let[l]of o.entries()){let u=t.moduleGraph.getModuleById(l);u&&(o.get(l).requiresRebuild=!1,t.moduleGraph.invalidateModule(u),r.push({type:`${u.type}-update`,path:u.url,acceptedPath:u.url,timestamp:Date.now()}))}r.length>0&&t.hot.send({type:"update",updates:r})}}async function g(t,r,l){let u=t.lastContent,s=await t.generate(u,r,l);if(s===!1)return;v&&l.start("Optimize CSS");let m=j(s,{minify:i});return v&&l.end("Optimize CSS"),m}async function b(t,r,l){let u={...t,getCombinedSourcemap:()=>{throw new Error("getCombinedSourcemap not implemented")}};for(let s of e.plugins){if(!s.transform||s.name.startsWith("@tailwindcss/"))continue;if(s.name.startsWith("vite:")&&s.name!=="vite:css"&&s.name!=="vite:css-post"&&s.name!=="vite:vue")continue;if(s.name==="ssr-styles")continue;let m="handler"in s.transform?s.transform.handler:s.transform;try{let f=await m.call(u,l,r);if(!f)continue;typeof f=="string"?l=f:f.code&&(l=f.code)}catch{console.error(`Error running ${s.name} on Tailwind CSS output. Skipping.`)}}return l}return[{name:"@tailwindcss/vite:scan",enforce:"pre",configureServer(t){a.push(t)},async configResolved(t){e=t,i=e.build.cssMinify!==!1,n=e.build.ssr!==!1&&e.build.ssr!==void 0},transformIndexHtml(t,{path:r}){r&&p(r,t,"html")},transform(t,r,l){let u=V(r);U(r)||p(r,t,u)}},{name:"@tailwindcss/vite:generate:serve",apply:"serve",enforce:"pre",async transform(t,r,l){var f=[];try{if(!U(r))return;let u=R(f,new I);u.start("[@tailwindcss/vite] Generate CSS (serve)");let s=o.get(r);l?.ssr||await Promise.all(a.map(F=>F.waitForRequestsIdle(r)));let m=await s.generate(t,F=>this.addWatchFile(F),u);if(!m)return o.delete(r),t;return{code:m}}catch(w){var D=w,x=!0}finally{y(f,D,x)}}},{name:"@tailwindcss/vite:generate:build",apply:"build",enforce:"pre",async transform(t,r){var m=[];try{if(!U(r))return;let l=R(m,new I);l.start("[@tailwindcss/vite] Generate CSS (build)");let u=o.get(r);let s=await u.generate(t,x=>this.addWatchFile(x),l);if(!s)return o.delete(r),t;return{code:s}}catch(f){var w=f,D=!0}finally{y(m,w,D)}},async renderStart(){var r=[];try{let t=R(r,new I);t.start("[@tailwindcss/vite] (render start)");for(let[m,f]of o.entries()){let w=await g(f,()=>{},t);if(!w){o.delete(m);continue}await b(this,m,w)}}catch(l){var u=l,s=!0}finally{y(r,u,s)}}}]}function V(a){let[e]=a.split("?",2);return S.extname(e).slice(1)}function U(a){return a.includes("/.vite/")?void 0:(V(a)==="css"||a.includes("&lang.css")||a.match(K))&&!J.test(a)}function j(a,{file:e="input.css",minify:n=!1}={}){function i(d){return z({filename:e,code:d,minify:n,sourceMap:!1,drafts:{customMedia:!0},nonStandard:{deepSelectorCombinator:!0},include:P.Nesting,exclude:P.LogicalProperties|P.DirSelector|P.LightDark,targets:{safari:16<<16|1024,ios_saf:16<<16|1024,firefox:8388608,chrome:7274496},errorRecovery:!0}).code}return i(i(Buffer.from(a))).toString()}function M(a){return S.resolve(a.replace(/\?.*$/,""))}var E=class extends Map{constructor(n){super();this.factory=n}get(n){let i=super.get(n);return i===void 0&&(i=this.factory(n,this),this.set(n,i)),i}},_=class{constructor(e,n,i,d,h){this.id=e;this.getSharedCandidates=n;this.base=i;this.customCssResolver=d;this.customJsResolver=h}lastContent="";compiler;requiresRebuild=!0;scanner;candidates=new Set;dependencies=new Set;basePath=null;overwriteCandidates=null;async generate(e,n,i){this.lastContent=e;let d=M(this.id),h=S.dirname(S.resolve(d));if(!this.compiler||!this.scanner||this.requiresRebuild){q(Array.from(this.dependencies)),this.dependencies=new Set([M(d)]),v&&i.start("Setup compiler"),this.compiler=await L(e,{base:h,shouldRewriteUrls:!0,onDependency:c=>{n(c),this.dependencies.add(c)},customCssResolver:this.customCssResolver,customJsResolver:this.customJsResolver}),v&&i.end("Setup compiler");let p=(this.compiler.root==="none"?[]:this.compiler.root===null?[]:[this.compiler.root]).concat(this.compiler.globs);this.scanner=new T({sources:p})}if(!(this.compiler.features&(C.AtApply|C.JsPluginCompat|C.ThemeFunction|C.Utilities)))return!1;if(!this.overwriteCandidates||this.compiler.features&C.Utilities){v&&i.start("Scan for candidates");for(let p of this.scanner.scan())this.candidates.add(p);v&&i.end("Scan for candidates")}if(this.compiler.features&C.Utilities){for(let p of this.scanner.files)n(p);for(let p of this.scanner.globs){if(p.pattern[0]==="!")continue;let c=S.relative(this.base,p.base);c[0]!=="."&&(c="./"+c),c=B(c),n(S.posix.join(c,p.pattern));let g=this.compiler.root;if(g!=="none"&&g!==null){let b=B(S.resolve(g.base,g.pattern));if(!await N.stat(b).then(r=>r.isDirectory(),()=>!1))throw new Error(`The path given to \`source(\u2026)\` must be a directory but got \`source(${b})\` instead.`);this.basePath=b}else g===null&&(this.basePath=null)}}this.requiresRebuild=!0,v&&i.start("Build CSS");let o=this.compiler.build(this.overwriteCandidates?this.overwriteCandidates:[...this.sharedCandidates(),...this.candidates]);return v&&i.end("Build CSS"),o}sharedCandidates(){if(!this.compiler)return new Set;if(this.compiler.root==="none")return new Set;let e=/^[A-Z]:/,n=d=>this.basePath===null||d.startsWith(this.basePath)?!0:e.test(d)?!1:!d.startsWith("/"),i=new Set;for(let[d,h]of this.getSharedCandidates())if(n(d))for(let o of h)i.add(o);return i}};export{O as default};
